{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service called UserContextService that manages user identity and authentication headers. It provides methods to generate and retrieve a pseudo-user ID stored in localStorage and to create authentication headers for HTTP requests.", "external_files": [], "external_methods": ["localStorage.getItem", "localStorage.setItem", "crypto.randomUUID"], "published": ["getUserId", "getAuthHeaders"], "classes": [{"name": "UserContextService", "description": "An Angular service that provides user identification and headers for authentication, handling storage and fallback mechanisms."}], "methods": [{"name": "getUserId(): string { getUserId", "description": "Retrieves a persistent pseudo-user ID from localStorage or generates a new one if not found or unavailable, with SSR-safe considerations.", "scope": "UserContextService", "scopeKind": "class"}, {"name": "getAuthHeaders(): { [k: string]: string } { getAuthHeaders", "description": "Returns an object containing the X-User-Id header with the value from getUserId() for use in HTTP requests.", "scope": "UserContextService", "scopeKind": "class"}], "calls": ["localStorage.getItem", "localStorage.setItem", "crypto.randomUUID", "Math.random"], "search-terms": ["Angular service", "user ID management", "localStorage", "pseudo-user-id", "SSR-safe", "auth headers"], "state": 2, "file_id": 33, "knowledge_revision": 124, "git_revision": "898d6450e8a785d368b9157b8f074f2a76df0627", "revision_history": [{"83": ""}, {"119": "e56fc5e2e16629a7033e7d73af37c28d8204e3c3"}, {"124": "898d6450e8a785d368b9157b8f074f2a76df0627"}], "ctags": [{"_type": "tag", "name": "KEY", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^const KEY = 'furniture_user_id';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "UserContextService", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^export class UserContextService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "crypto", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const crypto = g?.crypto ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "existing", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const existing = localStorage?.getItem(KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "g", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const g = typeof globalThis !== 'undefined' ? (globalThis as any) : undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "generated", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const generated = typeof crypto?.randomUUID === 'function'$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "getAuthHeaders", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^  getAuthHeaders(): { [k: string]: string } {$/", "language": "TypeScript", "kind": "method", "scope": "UserContextService", "scopeKind": "class"}, {"_type": "tag", "name": "getUserId", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^  getUserId(): string {$/", "language": "TypeScript", "kind": "method", "scope": "UserContextService", "scopeKind": "class"}, {"_type": "tag", "name": "localStorage", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const localStorage = g?.localStorage ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "undefined", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const crypto = g?.crypto ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "undefined", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const localStorage = g?.localStorage ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}], "hash": "be4f84f4f2c03f1e95b6e7116de45fe4", "format-version": 4, "code-base-name": "furniture_frontend", "filename": "furniture_frontend/src/app/services/user-context.service.ts"}