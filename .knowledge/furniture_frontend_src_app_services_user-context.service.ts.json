{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service called UserContextService that provides a user ID stored in localStorage and methods to retrieve the user ID and authentication headers.", "external_files": ["@angular/core"], "external_methods": [], "published": ["UserContextService"], "classes": [{"name": "UserContextService", "description": "Angular service that manages user identification via localStorage and generates authentication headers."}], "methods": [{"name": "getUserId(): string { getUserId", "description": "Returns a stable pseudo-user ID stored in localStorage or generates a new one if none exists; falls back if localStorage or crypto is unavailable.", "scope": "UserContextService", "scopeKind": "class"}, {"name": "getAuthHeaders(): { [k: string]: string } { getAuthHeaders", "description": "Returns an object containing the X-User-Id header with the user ID to be included in HTTP requests.", "scope": "UserContextService", "scopeKind": "class"}], "calls": ["localStorage.getItem", "localStorage.setItem", "crypto.randomUUID", "Math.random"], "search-terms": ["UserContextService", "localStorage", "crypto.randomUUID", "Angular service", "user ID"], "state": 2, "file_id": 33, "knowledge_revision": 119, "git_revision": "e56fc5e2e16629a7033e7d73af37c28d8204e3c3", "revision_history": [{"83": ""}, {"119": "e56fc5e2e16629a7033e7d73af37c28d8204e3c3"}], "ctags": [{"_type": "tag", "name": "KEY", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^const KEY = 'furniture_user_id';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "UserContextService", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^export class UserContextService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "crypto", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const crypto = win?.crypto ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "existing", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const existing = localStorage?.getItem(KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "generated", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const generated = typeof crypto?.randomUUID === 'function'$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "getAuthHeaders", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^  getAuthHeaders(): { [k: string]: string } {$/", "language": "TypeScript", "kind": "method", "scope": "UserContextService", "scopeKind": "class"}, {"_type": "tag", "name": "getUserId", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^  getUserId(): string {$/", "language": "TypeScript", "kind": "method", "scope": "UserContextService", "scopeKind": "class"}, {"_type": "tag", "name": "localStorage", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const localStorage = win?.localStorage ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "undefined", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const crypto = win?.crypto ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "undefined", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const localStorage = win?.localStorage ?? undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}, {"_type": "tag", "name": "win", "path": "/home/kavia/workspace/code-generation/furniture-shop-217777-217787/furniture_frontend/src/app/services/user-context.service.ts", "pattern": "/^      const win = typeof window !== 'undefined' ? window : undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "UserContextService.getUserId", "scopeKind": "method"}], "hash": "45d4615e18e27bd0f488ba90ee802653", "format-version": 4, "code-base-name": "furniture_frontend", "filename": "furniture_frontend/src/app/services/user-context.service.ts"}